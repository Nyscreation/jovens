<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Juventude Â· Sistema de GestÃ£o</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">
<meta name="mobile-web-app-capable" content="yes">

<link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700;800&family=JetBrains+Mono:wght@500;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>

<script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore-compat.js"></script>

<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="auth">
  <div class="auth-card">
    <div class="auth-logo">
      <div class="auth-logo-icon">ğŸ”¥</div>
      <h1 class="text-yellow">Juventude</h1>
      <p class="text-muted">GestÃ£o Mobile-First</p>
    </div>
    <div class="auth-tabs">
      <button class="auth-tab active" onclick="swtab('login')">Entrar</button>
      <button class="auth-tab" onclick="swtab('register')">Cadastrar</button>
    </div>
    <div id="lf">
      <div class="fg">
        <input type="email" class="fc" id="le" value="pastor@igreja.com" placeholder=" ">
        <label>Email</label>
      </div>
      <div class="fg">
        <input type="password" class="fc" id="lp" value="123456" placeholder=" ">
        <label>Senha</label>
      </div>
      <button class="btn-p" onclick="doLogin()">Acessar Sistema</button>
    </div>
    <div id="rf" style="display:none">
      <div class="fg"><input class="fc" id="rn" placeholder=" "><label>Nome</label></div>
      <div class="fg"><input type="email" class="fc" id="re" placeholder=" "><label>Email</label></div>
      <div class="fg">
        <select class="fc" id="rr">
          <option value="membro">Membro</option><option value="lider">LÃ­der</option><option value="pastor">Pastor</option>
        </select>
        <label>Perfil</label>
      </div>
      <div class="fg"><input type="password" class="fc" id="rp" placeholder=" "><label>Senha</label></div>
      <button class="btn-p" onclick="doRegister()">Criar Conta</button>
    </div>
  </div>
</div>

<div id="app">
  
  <aside class="sb" id="sidebar">
    <div class="ch" style="border-bottom: 1px solid var(--border-color);">
      <h2 class="text-yellow">Juventude</h2>
    </div>
    <nav class="sb-nav" style="padding: 16px;">
      <div class="fg" style="margin-bottom: 10px; color: var(--text-secondary); cursor: pointer;" onclick="goTo('dashboard', this)">ğŸ“Š Dashboard</div>
      <div class="fg" style="margin-bottom: 10px; color: var(--text-secondary); cursor: pointer;" onclick="goTo('members', this)">ğŸ‘¥ Membros</div>
      <div class="fg" style="margin-bottom: 10px; color: var(--text-secondary); cursor: pointer;" onclick="goTo('checkin', this)">âœ… Chamada</div>
      <div class="fg" style="margin-bottom: 10px; color: var(--text-secondary); cursor: pointer;" onclick="goTo('events', this)">ğŸ“… Eventos</div>
      <div class="fg" style="margin-bottom: 10px; color: var(--danger-red); cursor: pointer;" onclick="doLogout()">ğŸšª Sair</div>
    </nav>
  </aside>

  <main class="mc">
    <div class="topbar">
      <div>
        <div class="pg-title" id="pgtit">Dashboard</div>
        <div class="pg-sub" id="pgsub">VisÃ£o geral</div>
      </div>
      <div class="topbar-actions">
        <button class="btn-p btn-sm" onclick="openModal('mo-member')" style="padding: 8px 16px;">+ Novo</button>
      </div>
    </div>

    <div class="ca">

      <div id="page-dashboard" class="page on">
        <div class="sg">
          <div class="sc go"><div class="si">ğŸ‘¥</div><div class="sv" id="st-tot">0</div><div class="sl">Membros</div></div>
          <div class="sc gr"><div class="si">âœ…</div><div class="sv" id="st-freq">0%</div><div class="sl">FrequÃªncia</div></div>
          <div class="sc bl"><div class="si">ğŸ“‹</div><div class="sv" id="st-sess">0</div><div class="sl">Chamadas</div></div>
          <div class="sc ro"><div class="si">ğŸ </div><div class="sv">0</div><div class="sl">CÃ©lulas</div></div>
        </div>
        
        <div class="card">
          <div class="ch"><div class="ct">FrequÃªncia por Encontro</div></div>
          <div class="cb"><div class="chc"><canvas id="dc2"></canvas></div></div>
        </div>

        <div class="card">
          <div class="ch"><div class="ct">Ãšltimas Chamadas</div></div>
          <div class="cb" id="dash-sess" style="padding: 0;"></div>
        </div>
      </div>

      <div id="page-members" class="page">
        <div class="fg">
          <input class="fc" id="msrch" placeholder=" " oninput="filtMembers()">
          <label>ğŸ” Buscar Jovem</label>
        </div>
        <div class="mgrid" id="mgrid"></div>
      </div>

      <div id="page-checkin" class="page">
        <div class="card">
          <div class="ch"><div class="ct text-yellow" id="ci-tit">Nova Chamada</div></div>
          <div class="cb">
            <div class="fg">
              <select class="fc" id="ci-type" onchange="updCI()">
                <option value="culto">Culto</option>
                <option value="celula">CÃ©lula</option>
                <option value="evento">Evento</option>
              </select>
              <label>Tipo</label>
            </div>
            <div class="fg">
              <input type="date" class="fc" id="ci-date" onchange="updCI()">
              <label>Data</label>
            </div>
            <div class="fg">
              <input class="fc" id="ci-desc" placeholder=" " oninput="updCI()">
              <label>DescriÃ§Ã£o</label>
            </div>
            
            <button class="btn-p" onclick="saveSession()">Salvar Chamada</button>
            
            <div style="margin-top: 24px; text-align: center;">
              <h3 class="text-blue" id="cpct">0%</h3>
              <p class="text-muted">FrequÃªncia Atual</p>
            </div>
            
            <div class="fg" style="margin-top: 16px;">
              <input class="fc" id="cisrch" placeholder=" " oninput="rendCI()">
              <label>Filtrar lista...</label>
            </div>
            <div id="cilist" style="display: flex; flex-direction: column; gap: 10px;"></div>
          </div>
        </div>
      </div>

      <div id="page-events" class="page">
        <div class="card"><div class="ch"><div class="ct">CalendÃ¡rio</div></div>
          <div class="cb" id="evgrid">Nenhum evento futuro.</div>
        </div>
      </div>

      <div id="page-cells" class="page"><div id="cgrid"></div></div>
      <div id="page-history" class="page"><div id="htabs"></div><div id="hc1"></div><div id="hc2"></div><table id="htbody"></table><select id="mhsel"></select><div id="mhbody"></div></div>
      <div id="page-top10" class="page"><select id="yrsel"></select><div id="podium"></div><div id="t10grid"></div><div id="ystats"></div><canvas id="t10chart"></canvas></div>
      <div id="page-discipleship" class="page"><div id="disc-tree"></div></div>
      <div id="page-chat" class="page"><div id="chatc"></div><div id="chatpeer"></div><div id="chatms"></div><input id="chatin"><button onclick="sendMsg()"></button></div>
      <div id="page-announcements" class="page"><div id="annlist"></div><input id="at"><textarea id="ab"></textarea><select id="ap"></select><button onclick="addAnn()"></button></div>
      <div id="page-gamification" class="page"><div id="bdgrid"></div><div id="fullrank"></div></div>
      <div id="page-reports" class="page"><canvas id="rp1"></canvas><canvas id="rp2"></canvas></div>
      <div id="page-settings" class="page"></div>

    </div>
  </main>

  <nav class="bottom-nav">
    <div class="bn-item on" onclick="goTo('dashboard', this); setActiveBN(this)">
      <span class="ni-ic">ğŸ“Š</span><span>InÃ­cio</span>
    </div>
    <div class="bn-item" onclick="goTo('members', this); setActiveBN(this)">
      <span class="ni-ic">ğŸ‘¥</span><span>Jovens</span>
    </div>
    <div class="bn-item" onclick="goTo('checkin', this); setActiveBN(this)">
      <span class="ni-ic">âœ…</span><span>Chamada</span>
    </div>
    <div class="bn-item" onclick="goTo('events', this); setActiveBN(this)">
      <span class="ni-ic">ğŸ“…</span><span>Agenda</span>
    </div>
  </nav>

</div>

<div class="mo" id="mo-member">
  <div class="mdl">
    <div class="mhd">
      <div class="mtit text-yellow">ğŸ‘¤ Novo Membro</div>
      <button class="mclose" onclick="closeModal('mo-member')">âœ•</button>
    </div>
    <div class="fg"><input class="fc" id="nm-name" placeholder=" "><label>Nome Completo</label></div>
    <div class="fg">
      <select class="fc" id="nm-min">
        <option>Louvor</option><option>IntercessÃ£o</option><option>CÃ©lulas</option>
      </select>
      <label>MinistÃ©rio</label>
    </div>
    <div class="fg"><input class="fc" id="nm-phone" placeholder=" "><label>Telefone</label></div>
    <input type="hidden" id="nm-birth">
    <input type="hidden" id="nm-email">
    <input type="hidden" id="nm-gifts">
    <input type="hidden" id="nm-notes">
    <button class="btn-p" onclick="addMember()">Salvar</button>
  </div>
</div>

<div class="mo" id="mo-qr"><div class="mdl"><button onclick="closeModal('mo-qr')">X</button><div id="qrstr"></div></div></div>

<script>
// PEQUENO HELPER UI PARA BOTTOM NAV (NÃ£o afeta Firebase)
function setActiveBN(element) {
  document.querySelectorAll('.bn-item').forEach(el => el.classList.remove('on'));
  element.classList.add('on');
}

// COLOQUE EXATAMENTE AQUI O SEU SCRIPT DO FIREBASE COMPLETO (Copie e cole do seu arquivo anterior sem mudar 1 vÃ­rgula)
// ...
</script>
</body>
</html>
